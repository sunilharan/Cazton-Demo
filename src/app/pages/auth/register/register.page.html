<ion-header class="custom-header" mode="ios">
  <ion-header>
    <ion-toolbar mode="ios">
      <ion-buttons slot="start">
        <ion-button fill="clear" (click)="back()">
          <ion-icon color="theme-dark" name="chevron-back-outline"></ion-icon>
        </ion-button>
      </ion-buttons>
    </ion-toolbar>
  </ion-header>
</ion-header>

<ion-content>
  <div class="greeting-line">{{'signup.title' | translate}}</div>
  <div class="header">
    <div>{{'signup.already-have-account' | translate}}</div>
    <div (click)="login()" [innerHTML]="'signup.login-here' | translate"></div>
  </div>

  <div class="form">
    <form class="form" [formGroup]="register" (ngSubmit)="signup()">
      <div class="form-wrapper">
        <div class="form-item-wrapper">
          <ion-label position="stacked">
            {{'form-fields.name.title' | translate}}
          </ion-label>
          <ion-item class="form-item" lines="full">
            <ion-icon slot="start" name="person-outline"></ion-icon>
            <ion-input
              type="text"
              formControlName="name"
              [placeholder]="'form-fields.name.placeholder' | translate"
            >
            </ion-input>
          </ion-item>
          <div
            class="error"
            *ngIf="register.get('name').hasError('required') &&
                (register.get('name').dirty || register.get('name').touched)"
          >
            * {{'form-fields.name.errors.required' | translate}}
          </div>
        </div>

        <div class="form-item-wrapper">
          <ion-label position="stacked">
            {{"form-fields.email.title" | translate}}
          </ion-label>
          <ion-item class="form-item" lines="full">
            <ion-icon
              slot="start"
              src="assets/icons/email-outline.svg"
            ></ion-icon>
            <ion-input
              type="email"
              [placeholder]="'form-fields.email.placeholder' | translate"
              formControlName="email"
            >
            </ion-input>
          </ion-item>
          <div
            class="error"
            *ngIf="register.get('email').hasError('required') &&
            (register.get('email').dirty || register.get('email').touched)"
          >
            * {{'form-fields.email.errors.required' | translate}}
          </div>
          <div
            class="error"
            *ngIf="register.get('email').hasError('email') &&
            (register.get('email').dirty || register.get('email').touched)"
          >
            * {{'form-fields.email.errors.invalid' | translate}}
          </div>
        </div>

        <div class="form-item-wrapper">
          <ion-label position="stacked">
            {{"form-fields.password.title" | translate}}
          </ion-label>
          <ion-item class="form-item" lines="full">
            <ion-icon slot="start" src="assets/icons/lock.svg"></ion-icon>
            <ion-input
              type="password"
              formControlName="password"
              [placeholder]="'form-fields.password.placeholder' | translate"
            >
            </ion-input>
          </ion-item>
          <div
            class="error"
            *ngIf="register.get('password').hasError('required') &&
            (register.get('password').dirty || register.get('password').touched)"
          >
            * {{'form-fields.password.errors.required' | translate}}
          </div>
          <div
            class="error"
            *ngIf="register.get('password').hasError('minlength') &&
            (register.get('password').dirty || register.get('password').touched)"
          >
            * {{'form-fields.password.errors.length' | translate}}
          </div>
        </div>

        <div class="form-item-wrapper">
          <ion-label position="stacked">
            {{'form-fields.phone.title' | translate}}
          </ion-label>
          <ion-item class="form-item" lines="full">
            <ion-icon slot="start" name="call-outline"></ion-icon>
            <ion-input
              type="number"
              formControlName="phoneno"
              minlength="10"
              [placeholder]="'form-fields.phone.placeholder' | translate"
            >
            </ion-input>
          </ion-item>
          <div
            class="error"
            *ngIf="register.get('phoneno').hasError('required') &&
            (register.get('phoneno').dirty || register.get('phoneno').touched)"
          >
            * {{'form-fields.phone.errors.required' | translate}}
          </div>
          <div
            class="error"
            *ngIf="register.get('phoneno').hasError('pattern') &&
            (register.get('phoneno').dirty || register.get('phoneno').touched)"
          >
            * {{'form-fields.phone.errors.length' | translate}}
          </div>
        </div>
      </div>

      <div class="button-wrapper">
        <ion-button
          expand="block"
          type="submit"
          [disabled]="!register.valid || showDots"
        >
          <ion-text color="white" *ngIf="!showDots">
            {{'signup.register' | translate}}
          </ion-text>
          <ion-spinner name="dots" *ngIf="showDots"></ion-spinner>
        </ion-button>
      </div>
    </form>
  </div>
</ion-content>
